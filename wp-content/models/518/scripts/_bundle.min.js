function playAnimation(){animationGroup.isPlaying||($("#playAnimation").css("background","#DFDFDF"),isOpen?animationGroup.start(!1,-1,4,0):animationGroup.start(!1,1,0,4),isOpen=!isOpen)}function woodBlockState(){for(isWoodBlock=!isWoodBlock,meshes=1;hinge.meshes.length>meshes;meshes++)hinge.meshes[meshes].name.includes("Background")||hinge.meshes[meshes].name.includes("hdrSkyBox")||(hinge.meshes[meshes].name.includes("Wood")&&(hinge.meshes[meshes].visibility=!hinge.meshes[meshes].visibility),hinge.meshes[meshes].material.ambientTexture=new BABYLON.Texture(`./assets/materials/ao${isOpen?"Open":"Closed"}/${isWoodBlock?"WB_":""}${hinge.meshes[meshes].name}_AO.png`,scene),hinge.meshes[meshes].material.ambientTexture.vAng=-Math.PI,hinge.meshes[meshes].material.ambientTexture.wAng=-Math.PI),$("#woodState").text(`${isWoodBlock?"Show":"Hide"} Wood Blocks`),$("#woodImage").attr("src",`./assets/layout/${isWoodBlock?"show":"hide"}.png`);isWoodBlock&&isOpen&&(scene.activeCamera.spinTo("alpha",Math.PI*1.1,60),scene.activeCamera.spinTo("beta",7.5*Math.PI/16,60),scene.activeCamera.spinTo("radius",4,60))}function materialChange(n){var t;switch(n){case"chrome":t="#C7C7C7";document.title="SOSS - 518US26D";break;case"brass":t="#D2BB74";document.title="SOSS - 518US4";break;case"black":t="#181818";document.title="SOSS - 518US19";break;case"nickel":t="#D3CBBE";document.title="SOSS - 518US15"}if(n!=hingeMaterial){for($(`#${n}`).detach().prependTo("#materialChange"),$(`#${n}`).css("display","inline-block"),meshes=1;hinge.meshes.length>meshes;meshes++)hinge.meshes[meshes].name.includes("Wood")||hinge.meshes[meshes].name.includes("Background")||hinge.meshes[meshes].name.includes("hdrSkyBox")||(hinge.meshes[meshes].material.bumpTexture=baseNormals[meshes],hinge.meshes[meshes].material.albedoColor=new BABYLON.Color3.FromHexString(t),n!="black"?(hinge.meshes[meshes].material.albedoColor.b-=50/255,hinge.meshes[meshes].material.albedoColor.g-=50/255,hinge.meshes[meshes].material.albedoColor.r-=50/255):(hinge.meshes[meshes].material.bumpTexture=new BABYLON.Texture(`./assets/materials/normalMaps/${hinge.meshes[meshes].name}_BlackECoat.png`,scene),hinge.meshes[meshes].material.bumpTexture.vAng=-Math.PI,hinge.meshes[meshes].material.bumpTexture.wAng=-Math.PI));hingeMaterial=n}}var data={Code:"soss",Description:"Invinsible Hinge",ModelPath:"/assets/models/",Model:"hinge.glb",Skybox:"./assets/env/CathedralEnvHDR.dds",Background:"assets/environment/background.jpg"},canvas=document.getElementById("builderCanvas"),engine=new BABYLON.Engine(canvas,!0,{premultipliedAlpha:!1,preserveDrawingBuffer:!0,stencil:!0}),scene=new BABYLON.Scene(engine),hinge,baseNormals=[new BABYLON.Texture("",scene),new BABYLON.Texture("",scene),new BABYLON.Texture("",scene),new BABYLON.Texture("",scene),new BABYLON.Texture("",scene),new BABYLON.Texture("",scene)],animationGroup,skyboxPath=data.Skybox,isOpen=!0,isWoodBlock=!0,hingeMaterial="Chrome",root,createScene;window.location.hostname!="localhost"?(root=window.location.href.replace("index.html",""),root.includes("#")&&(root=root.replace("#",""))):root=window.location.origin;scene.clearColor=new BABYLON.Color3(1,1,1);BABYLON.ArcRotateCamera.prototype.spinTo=function(n,t,i){var r=new BABYLON.CubicEase;r.setEasingMode(BABYLON.EasingFunction.EASINGMODE_EASEINOUT);BABYLON.Animation.CreateAndStartAnimation("at4",this,n,i,120,this[n],t,0,r)};createScene=function(){var i=root+data.ModelPath,r=data.Model,n=new BABYLON.ArcRotateCamera("Camera",Math.PI*1.1,7.5*Math.PI/16,4,new BABYLON.Vector3(0,0,0),scene),t;return n.attachControl(canvas,!1),n.lowerRadiusLimit=2.3,n.upperRadiusLimit=6,n.panningSensibility=1e3,n.wheelPrecision=100,t=new BABYLON.HemisphericLight("omni",new BABYLON.Vector3(0,2,0),scene),t.intensity=0,BABYLON.SceneLoader.ShowLoadingScreen=!1,BABYLON.SceneLoader.Append(i,r,scene,onSuccess=function(n){var t,i;for(hinge=n,t=new BABYLON.Texture("",scene),n=1;hinge.meshes.length>n;n++)hinge.meshes[n].actionManager=new BABYLON.ActionManager(scene),hinge.meshes[n].actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,function(){},!1)),hinge.meshes[n].name.includes("hdrSkyBox")||(t<<new BABYLON.Texture(`./assets/materials/aoOpen/${hinge.meshes[n].name}_AO.png`,scene),t<<new BABYLON.Texture(`./assets/materials/aoOpen/WB_${hinge.meshes[n].name}_AO.png`,scene),t<<new BABYLON.Texture(`./assets/materials/aoClosed/${hinge.meshes[n].name}_AO.png`,scene),t<<new BABYLON.Texture(`./assets/materials/aoClosed/WB_${hinge.meshes[n].name}_AO.png`,scene),hinge.meshes[n].name.includes("Wood")||hinge.meshes[n].name.includes("Background")?(t<<new BABYLON.Texture("",scene),baseNormals[n]=new BABYLON.Texture("",scene)):(t<<new BABYLON.Texture(`./assets/materials/normalMaps/${hinge.meshes[n].name}_BlackECoat.png`,scene),baseNormals[n]=hinge.meshes[n].material.bumpTexture)),hinge.meshes[n].name.includes("Wood")?(hinge.meshes[n].material.roughness=2,hinge.meshes[n].material.metallic=0):(hinge.meshes[n].material.roughness=.5,hinge.meshes[n].material.metallic=.9);hinge.animationsEnabled=!0;animationGroup=hinge.animationGroups[0];animationGroup.loopAnimation=!1;isOpen=!0;animationGroup.onAnimationGroupPlayObservable.add(function(){setTimeout(()=>{for(n=1;hinge.meshes.length>n;n++)hinge.meshes[n].name.includes("Background")||hinge.meshes[n].name.includes("hdrSkyBox")||(hinge.meshes[n].material.ambientTexture=new BABYLON.Texture(`./assets/materials/ao${isOpen?"Open":"Closed"}/${isWoodBlock?"WB_":""}${hinge.meshes[n].name}_AO.png`,scene),hinge.meshes[n].material.ambientTexture.vAng=-Math.PI,hinge.meshes[n].material.ambientTexture.wAng=-Math.PI)},isOpen?4e3:0)});animationGroup.onAnimationEndObservable.add(function(){$("#playAnimation").css("background"," #CD3327")});i=new BABYLON.CubeTexture.CreateFromPrefilteredData(skyboxPath,scene);scene.environmentTexture=i;$("#loadingScreen").fadeOut(4e3)},onProgress=function(n){if(n.lengthComputable){var t=(n.loaded*100/n.total).toFixed();console.log("Loading, please wait..."+t+"%");$("#loadingText").text("Loading, please wait..."+t+"%");$("#loadingBar").css("width",`${t}%`);t>=100}else dlCount=n.loaded/1048576,console.log("Loading, please wait..."+Math.floor(dlCount*100)/100+" MB already loaded.")}),window.addEventListener("resize",function(){engine.resize()}),scene};scene=createScene();engine.runRenderLoop(function(){window.addEventListener("resize",function(){engine.resize()});scene.render()});